FROM trzeci/emscripten:sdk-tag-1.38.31-64bit

RUN mkdir /build

COPY build/wasm/linux/install.dependencies.sh /build

RUN cd /build; ./install.dependencies.sh

COPY src/ImageMagick /ImageMagick

RUN cd /ImageMagick; ./checkout.sh linux

COPY build/wasm/linux/build.ImageMagick.sh /build

COPY build/wasm/linux/build.ImageMagick.dependencies.sh /build

RUN cd /ImageMagick/libraries; /build/build.ImageMagick.dependencies.sh

COPY build/wasm/linux/build.ImageMagick.imagemagick.sh /build

RUN cd /ImageMagick/libraries; /build/build.ImageMagick.imagemagick.sh